{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="min-h-screen flex items-center justify-center py-12 px-4 relative overflow-hidden">
  <!-- Background Effects -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-1/4 right-1/4 w-96 h-96 bg-gradient-to-br from-blue-500/10 to-purple-500/5 rounded-full blur-3xl opacity-40 animate-float"></div>
    <div class="absolute bottom-1/4 left-1/4 w-80 h-80 bg-gradient-to-tr from-emerald-500/10 to-blue-500/5 rounded-full blur-3xl opacity-30 animate-float" style="animation-delay: 2s;"></div>
  </div>

  <div class="w-full max-w-md relative z-10">
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="w-20 h-20 bg-gradient-to-br from-blue-500/20 to-blue-600/20 border border-blue-500/30 rounded-full flex items-center justify-center mx-auto mb-6 animate-scale-in">
        <i class="fas fa-sign-in-alt text-3xl text-blue-500"></i>
      </div>
      <h1 class="text-3xl font-bold mb-3" style="color: var(--text-primary);">Welcome Back</h1>
      <p style="color: var(--text-secondary);">Sign in to access your technical library</p>
    </div>

    <!-- Sign In Form -->
    <div class="card" style="background: var(--bg-surface); border: 1px solid var(--border-default); border-radius: var(--radius-xl); padding: var(--space-8); box-shadow: var(--shadow-lg);">
      <form method="POST" style="display: flex; flex-direction: column; gap: var(--space-6);">
        {% csrf_token %}
        
        {% if request.GET.next %}
          <input type="hidden" name="next" value="{{ request.GET.next }}">
        {% endif %}
        
        <!-- Username Field -->
        <div class="form-group">
          <label for="username" style="display: flex; align-items: center; gap: var(--space-2); font-weight: var(--font-semibold); color: var(--text-primary); margin-bottom: var(--space-2);">
            <i class="fas fa-user" style="color: var(--accent-primary);"></i>
            Username
          </label>
          <div style="position: relative;">
            <div style="position: absolute; left: var(--space-3); top: 50%; transform: translateY(-50%); color: var(--text-muted); pointer-events: none;">
              <i class="fas fa-user"></i>
            </div>
            <input type="text" name="username" id="username" 
                   style="width: 100%; padding: var(--space-3) var(--space-3) var(--space-3) var(--space-10); font-size: var(--text-sm); color: var(--text-primary); background: var(--bg-surface); border: 1px solid var(--border-default); border-radius: var(--radius-lg); transition: all 0.2s ease-out; outline: none;"
                   placeholder="Enter your username" required autocomplete="username"
                   onfocus="this.style.borderColor='var(--accent-primary)'; this.style.boxShadow='0 0 0 3px rgba(59, 130, 246, 0.1)';"
                   onblur="this.style.borderColor='var(--border-default)'; this.style.boxShadow='none';">
          </div>
        </div>

        <!-- Password Field -->
        <div class="form-group">
          <label for="password" style="display: flex; align-items: center; gap: var(--space-2); font-weight: var(--font-semibold); color: var(--text-primary); margin-bottom: var(--space-2);">
            <i class="fas fa-lock" style="color: var(--accent-primary);"></i>
            Password
          </label>
          <div style="position: relative;">
            <div style="position: absolute; left: var(--space-3); top: 50%; transform: translateY(-50%); color: var(--text-muted); pointer-events: none;">
              <i class="fas fa-lock"></i>
            </div>
            <input type="password" name="password" id="password" 
                   style="width: 100%; padding: var(--space-3) var(--space-3) var(--space-3) var(--space-10); font-size: var(--text-sm); color: var(--text-primary); background: var(--bg-surface); border: 1px solid var(--border-default); border-radius: var(--radius-lg); transition: all 0.2s ease-out; outline: none;"
                   placeholder="Enter your password" required autocomplete="current-password"
                   onfocus="this.style.borderColor='var(--accent-primary)'; this.style.boxShadow='0 0 0 3px rgba(59, 130, 246, 0.1)';"
                   onblur="this.style.borderColor='var(--border-default)'; this.style.boxShadow='none';">
          </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary" 
                style="width: 100%; padding: var(--space-4) var(--space-6); font-size: var(--text-base); font-weight: var(--font-semibold); background: linear-gradient(135deg, var(--accent-primary), #2563eb); border: none; border-radius: var(--radius-lg); color: white; cursor: pointer; transition: all 0.2s ease-out; display: flex; align-items: center; justify-content: center; gap: var(--space-2);"
                onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 10px 15px -3px rgba(59, 130, 246, 0.25), 0 4px 6px -2px rgba(59, 130, 246, 0.1)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px -1px rgba(59, 130, 246, 0.25)';"
                onmousedown="this.style.transform='translateY(0)';"
                onmouseup="this.style.transform='translateY(-1px)';">
          <i class="fas fa-sign-in-alt"></i>
          <span>Sign In</span>
        </button>
      </form>
    </div>

    <!-- Footer Links -->
    <div class="text-center" style="margin-top: var(--space-8);">
      <p style="color: var(--text-secondary); margin-bottom: var(--space-4);">Don't have an account?</p>
      <a href="{% url 'accounts.signup' %}" class="btn btn-secondary" 
         style="padding: var(--space-3) var(--space-5); font-size: var(--text-sm); font-weight: var(--font-medium); background: var(--bg-elevated); border: 1px solid var(--border-default); border-radius: var(--radius-lg); color: var(--text-primary); text-decoration: none; cursor: pointer; transition: all 0.2s ease-out; display: inline-flex; align-items: center; gap: var(--space-2);"
         onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 6px -1px rgba(0, 0, 0, 0.1)';"
         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
        <i class="fas fa-user-plus"></i>
        <span>Create an account</span>
      </a>
    </div>

    <!-- Admin Approval Notice -->
    <div style="margin-top: var(--space-6); background: linear-gradient(135deg, rgba(251, 191, 36, 0.08) 0%, rgba(251, 191, 36, 0.03) 100%); border: 1px solid rgba(251, 191, 36, 0.3); border-radius: var(--radius-xl); padding: var(--space-5); position: relative; overflow: hidden;">
      <div style="display: flex; align-items: flex-start; gap: var(--space-4);">
        <div style="width: 40px; height: 40px; background: rgba(251, 191, 36, 0.15); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
          <i class="fas fa-shield-alt" style="color: #fbbf24; font-size: var(--text-lg);"></i>
        </div>
        <div>
          <h4 style="color: var(--text-primary); font-weight: var(--font-semibold); font-size: var(--text-base); margin-bottom: var(--space-2);">Admin Approval Required</h4>
          <p style="color: var(--text-secondary); font-size: var(--text-sm); line-height: 1.5; margin: 0;">
            After signing in, you'll need to request access to read and manage content. An administrator will review and approve your request.
          </p>
        </div>
      </div>
    </div>

    <!-- Request Access Highlight -->
    {% if not user.is_authenticated %}
    <div style="margin-top: var(--space-6); background: var(--bg-elevated); border: 1px solid var(--border-default); border-radius: var(--radius-2xl); padding: var(--space-8); text-align: center; position: relative; overflow: hidden;">
      <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, transparent 50%, rgba(167, 139, 250, 0.05) 100%); pointer-events: none;"></div>
      <h3 style="display: flex; align-items: center; justify-content: center; gap: var(--space-3); font-size: var(--text-xl); font-weight: var(--font-bold); color: var(--text-primary); margin-bottom: var(--space-4); position: relative;">
        <i class="fas fa-key" style="color: var(--accent-primary);"></i>
        Need Access?
      </h3>
      <p style="color: var(--text-secondary); margin-bottom: var(--space-6); position: relative;">After signing in, you can request access to view and download technical content.</p>
      <div style="position: relative;">
        <a href="{% url 'accounts.signup' %}" class="btn-request-access">
          <i class="fas fa-rocket"></i>
          Get Started Now
        </a>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock content %}